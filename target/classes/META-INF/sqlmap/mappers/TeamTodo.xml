<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.mylog.dao.Team_TodoDao">
	<resultMap type="TeamTodo" id="TeamTodoResult">
		<result column="ttno" property="ttno"/>
		<result column="tno" property="tno"/>
		<result column="ttcontent" property="ttcontent"/>
		<result column="ttcheck" property="ttcheck"/>
		<result column="tmno" property="tmno"/>
		<result column="ttorder" property="ttorder"/>
		<result column="ttrdate" property="ttrdate"/>
		<result column="mid" property="mid"/>
	</resultMap>
	
	<!-- teamTodoList -->
	<select id="teamTodoList" parameterType="int" resultType="TeamTodo">
		SELECT TT.*, TM.mID 
	        FROM TEAM_TODO TT, TEAM_MEMBER TM, TEAM T
	        WHERE TT.tmNO=TM.tmNO AND T.TNO= TT.TNO AND TT.tNO=#{tno}
	        ORDER BY ttORDER
	</select>
	<!-- writeTeamTodo -->
	<insert id="writeTeamTodo" parameterType="TeamTodo">
		INSERT INTO TEAM_TODO (ttNO, tNO, ttCONTENT, ttCHECK, tmNO, ttORDER, ttRDATE)
        	VALUES (TEAM_TODO_SEQ.NEXTVAL, #{tno}, #{ttcontent}, 0, #{tmno}, TEAM_TODO_SEQ.CURRVAL, SYSDATE);
	</insert>
	<!-- deleteTeamTodo -->
	<delete id="deleteTeamTodo" parameterType="int">
		DELETE FROM TEAM_TODO WHERE ttNO=#{ttno}
	</delete>
	<!-- orderingTeamTodo -->
	<update id="orderingTeamTodo" parameterType="TeamTodo">
		UPDATE TEAM_TODO SET ttORDER = #{ttorder}
                    	 WHERE ttNO=#{ttno}
	</update>
	<!-- checkTeamTodo -->
	<update id="checkTeamTodo" parameterType="TeamTodo">
		UPDATE TEAM_TODO SET ttCHECK = #{ttcheck}
	                     WHERE ttNO=#{ttno} AND tmNO=#{tmno}
	</update>
	<!-- deleteTeamTodoList -->
	<delete id="deleteTeamTodoList" parameterType="int">
		DELETE FROM TEAM_TODO WHERE tNO=#{tno}
	</delete>
	
</mapper>