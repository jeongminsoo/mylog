<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.project.mylog.dao.MemberDao">
	<resultMap type="Member" id="MemberResult">
		<result column="mid" property="mid"/>
		<result column="mpw" property="mpw"/>
		<result column="mname" property="mname"/>
		<result column="mbirth" property="mbirth"/>
		<result column="memail" property="memail"/>
		<result column="mmotto" property="mmotto"/>
		<result column="mstatus" property="mstatus"/>
		<result column="startRow" property="startRow"/>
		<result column="endRow" property="endRow"/>
	</resultMap>
	
	<!-- admin이 사용 예정 -->
	<!-- deleteMember(회원삭제) -->
	<update id="deleteMember" parameterType="String">
		UPDATE MEMBER SET mSTATUS = 0
        	WHERE mID=#{mid}
	</update>
	<!-- recoverMember -->
	<update id="recoverMember" parameterType="String">
		UPDATE MEMBER SET mSTATUS = 1
        	WHERE mID=#{mid}
	</update>
	<!-- memberList -->
	<select id="memberList" resultType="Member">
		SELECT * FROM 
	        (SELECT ROWNUM RN, A.* FROM 
		        (SELECT M.* FROM MEMBER M
		                    ORDER BY mID, mSTATUS DESC) A)
		        WHERE RN BETWEEN #{startRow} AND #{endRow}
	</select>
	
</mapper>